kind: ConfigMap
apiVersion: v1
metadata:
  name: my-cluster-kafka-config
  namespace: kafka
  ownerReferences:
    - apiVersion: kafka.strimzi.io/v1beta1
      kind: Kafka
      name: my-cluster
      uid: 54436ba3-51c7-44aa-a117-c495e4e5e334
      controller: false
      blockOwnerDeletion: false
  labels:
    app.kubernetes.io/instance: my-cluster
    app.kubernetes.io/managed-by: strimzi-cluster-operator
    app.kubernetes.io/name: kafka
    app.kubernetes.io/part-of: strimzi-my-cluster
    strimzi.io/cluster: my-cluster
    strimzi.io/kind: Kafka
    strimzi.io/name: strimzi
data:
  advertised-hostnames.config: >-
    PLAIN_9092_0://my-cluster-kafka-0.my-cluster-kafka-brokers.kafka.svc
    PLAIN_9092_1://my-cluster-kafka-1.my-cluster-kafka-brokers.kafka.svc
    PLAIN_9092_2://my-cluster-kafka-2.my-cluster-kafka-brokers.kafka.svc
    TLS_9093_0://my-cluster-kafka-0.my-cluster-kafka-brokers.kafka.svc
    TLS_9093_1://my-cluster-kafka-1.my-cluster-kafka-brokers.kafka.svc
    TLS_9093_2://my-cluster-kafka-2.my-cluster-kafka-brokers.kafka.svc
  advertised-ports.config: >-
    PLAIN_9092_0://9092 PLAIN_9092_1://9092 PLAIN_9092_2://9092
    TLS_9093_0://9093 TLS_9093_1://9093 TLS_9093_2://9093
  listeners.config: PLAIN_9092 TLS_9093
  log4j.properties: >
    # Do not change this generated file. Logging can be configured in the
    corresponding Kubernetes resource.

    log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender

    log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout

    log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} %p %m (%c)
    [%t]%n

    kafka.root.logger.level=INFO

    log4j.rootLogger=${kafka.root.logger.level}, CONSOLE

    log4j.logger.org.I0Itec.zkclient.ZkClient=INFO

    log4j.logger.org.apache.zookeeper=INFO

    log4j.logger.kafka=INFO

    log4j.logger.org.apache.kafka=INFO

    log4j.logger.kafka.request.logger=WARN, CONSOLE

    log4j.logger.kafka.network.Processor=OFF

    log4j.logger.kafka.server.KafkaApis=OFF

    log4j.logger.kafka.network.RequestChannel$=WARN

    log4j.logger.kafka.controller=TRACE

    log4j.logger.kafka.log.LogCleaner=INFO

    log4j.logger.state.change.logger=TRACE

    log4j.logger.kafka.authorizer.logger=INFO
  server.config: >-
    ##############################

    ##############################

    # This file is automatically generated by the Strimzi Cluster Operator

    # Any changes to this file will be ignored and overwritten!

    ##############################

    ##############################


    ##########

    # Broker ID

    ##########

    broker.id=${STRIMZI_BROKER_ID}


    ##########

    # Zookeeper

    ##########

    zookeeper.connect=my-cluster-zookeeper-client:2181

    zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty

    zookeeper.ssl.client.enable=true

    zookeeper.ssl.keystore.location=/tmp/kafka/cluster.keystore.p12

    zookeeper.ssl.keystore.password=${CERTS_STORE_PASSWORD}

    zookeeper.ssl.keystore.type=PKCS12

    zookeeper.ssl.truststore.location=/tmp/kafka/cluster.truststore.p12

    zookeeper.ssl.truststore.password=${CERTS_STORE_PASSWORD}

    zookeeper.ssl.truststore.type=PKCS12


    ##########

    # Kafka message logs configuration

    ##########

    log.dirs=/var/lib/kafka/data/kafka-log${STRIMZI_BROKER_ID}


    ##########

    # Replication listener

    ##########

    listener.name.replication-9091.ssl.keystore.location=/tmp/kafka/cluster.keystore.p12

    listener.name.replication-9091.ssl.keystore.password=${CERTS_STORE_PASSWORD}

    listener.name.replication-9091.ssl.keystore.type=PKCS12

    listener.name.replication-9091.ssl.truststore.location=/tmp/kafka/cluster.truststore.p12

    listener.name.replication-9091.ssl.truststore.password=${CERTS_STORE_PASSWORD}

    listener.name.replication-9091.ssl.truststore.type=PKCS12

    listener.name.replication-9091.ssl.client.auth=required


    ##########

    # Listener configuration: PLAIN-9092

    ##########


    ##########

    # Listener configuration: TLS-9093

    ##########

    listener.name.tls-9093.ssl.keystore.location=/tmp/kafka/cluster.keystore.p12

    listener.name.tls-9093.ssl.keystore.password=${CERTS_STORE_PASSWORD}

    listener.name.tls-9093.ssl.keystore.type=PKCS12



    ##########

    # Common listener configuration

    ##########

    listeners=REPLICATION-9091://0.0.0.0:9091,PLAIN-9092://0.0.0.0:9092,TLS-9093://0.0.0.0:9093

    advertised.listeners=REPLICATION-9091://my-cluster-kafka-${STRIMZI_BROKER_ID}.my-cluster-kafka-brokers.kafka.svc:9091,PLAIN-9092://${STRIMZI_PLAIN_9092_ADVERTISED_HOSTNAME}:${STRIMZI_PLAIN_9092_ADVERTISED_PORT},TLS-9093://${STRIMZI_TLS_9093_ADVERTISED_HOSTNAME}:${STRIMZI_TLS_9093_ADVERTISED_PORT}

    listener.security.protocol.map=REPLICATION-9091:SSL,PLAIN-9092:PLAINTEXT,TLS-9093:SSL

    inter.broker.listener.name=REPLICATION-9091

    sasl.enabled.mechanisms=

    ssl.secure.random.implementation=SHA1PRNG

    ssl.endpoint.identification.algorithm=HTTPS


    ##########

    # User provided configuration

    ##########

    log.message.format.version=2.6

    offsets.topic.replication.factor=3

    transaction.state.log.min.isr=2

    transaction.state.log.replication.factor=3
